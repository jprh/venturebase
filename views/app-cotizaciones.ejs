<!-- Wappler include head-page="layouts/app" fontawesome_4="cdn" is="dmx-app" id="appprojects" appConnect="local" jquery_slim_35="cdn" bootstrap5="cdn" components="{dmxBootstrap5Navigation:{},dmxSockets:{},dmxFormatter:{},dmxStateManagement:{},dmxBootstrap5TableGenerator:{},dmxBrowser:{},dmxValidator:{},dmxBootstrap5Offcanvas:{},dmxDataTraversal:{}}" moment_2="local with locales" -->
<dmx-serverconnect id="serverconnectupdatestatus" url="api/cotizaciones/update_cotizaciones_status"></dmx-serverconnect>
<div class="offcanvas offcanvas-end" id="offcanvas1" is="dmx-bs5-offcanvas" tabindex="-1" nobackdrop="true" scroll="true" style="width: 500px;">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Detalles de la Cotización</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="container">
            <div class="row">
                <div class="col-12" is="dmx-data-detail" id="data_detail1" dmx-bind:data="serverconnectquerypagedcotizaciones.data.query.data" key="id">
                    <div class="table-responsive">
                        <table class="table">
                            <tbody dmx-generator="bs5table" dmx-populate="data_detail1.data">
                                <tr>
                                    <th>Status</th>
                                    <td dmx-text="data_detail1.data.status.capitalize()"></td>
                                </tr>
                                <tr>
                                    <th>Fecha solicitud</th>
                                    <td dmx-text="data_detail1.data.fecha_solicitud.formatDate('dd-MM-yyyy')"></td>
                                </tr>
                                <tr>
                                    <th>Compañía</th>
                                    <td dmx-text="data_detail1.data.name.capitalize()"></td>
                                </tr>
                                <tr>
                                    <th>Tipo de servicio</th>
                                    <td dmx-text="data_detail1.data.tipo_de_servicio.capitalize()"></td>
                                </tr>

                                <tr>
                                    <th>Fecha de respuesta</th>
                                    <td dmx-text="data_detail1.data.fecha_de_respuesta"></td>
                                </tr>
                                <tr>
                                    <th>Tipo de operacion</th>
                                    <td dmx-text="data_detail1.data.tipo_de_operacion.capitalize()"></td>
                                </tr>
                                <tr>
                                    <th>Modalidad de transporte</th>
                                    <td dmx-text="data_detail1.data.modalidad_de_transporte.capitalize()"></td>
                                </tr>

                                <tr>
                                    <th>Equipo especial</th>
                                    <td dmx-text="data_detail1.data.equipo_especial"></td>
                                </tr>
                                <tr>
                                    <th>Unidad peso</th>
                                    <td dmx-text="data_detail1.data.unidad_peso"></td>
                                </tr>
                                <tr>
                                    <th>Tipomercanciaproducto</th>
                                    <td dmx-text="data_detail1.data.tipomercanciaproducto"></td>
                                </tr>
                                <tr>
                                    <th>Zona destino</th>
                                    <td dmx-text="data_detail1.data.zona_destino"></td>
                                </tr>
                                <tr>
                                    <th>Zona origen</th>
                                    <td dmx-text="data_detail1.data.zona_origen"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='vehiculo'">
                                    <th>Veh tipo</th>
                                    <td dmx-text="data_detail1.data.veh_tipo"></td>
                                </tr>
                                <tr>
                                    <th>Reqerimiento especial</th>
                                    <td dmx-text="data_detail1.data.reqerimiento_especial"></td>
                                </tr>
                                <tr>
                                    <th>Valor mercancia</th>
                                    <td dmx-text="data_detail1.data.valor_mercancia"></td>
                                </tr>
                                <tr>
                                    <th>Peso total</th>
                                    <td dmx-text="data_detail1.data.peso_total"></td>
                                </tr>
                                <tr>
                                    <th>Fecha entrega</th>
                                    <td dmx-text="data_detail1.data.fecha_entrega.formatDate('dd-MM-yyyy')"></td>
                                </tr>
                                <tr>
                                    <th>Ciudad destino</th>
                                    <td dmx-text="data_detail1.data.ciudad_destino.capitalize()"></td>
                                </tr>
                                <tr>
                                    <th>Pais destino</th>
                                    <td dmx-text="data_detail1.data.pais_destino.capitalize()"></td>
                                </tr>
                                <tr>
                                    <th>Fecha recogida</th>
                                    <td dmx-text="data_detail1.data.fecha_recogida"></td>
                                </tr>
                                <tr>
                                    <th>Ciudad origen</th>
                                    <td dmx-text="data_detail1.data.ciudad_origen.capitalize()"></td>
                                </tr>

                                <tr>
                                    <th>Pais origen</th>
                                    <td dmx-text="data_detail1.data.pais_origen.capitalize()"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='carga suelta'">
                                    <th>Altura</th>
                                    <td dmx-text="data_detail1.data.altura"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='carga suelta'">
                                    <th>Longitud</th>
                                    <td dmx-text="data_detail1.data.longitud"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='carga suelta'">
                                    <th>Anchura</th>
                                    <td dmx-text="data_detail1.data.anchura"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='vehiculo'">
                                    <th>Veh ano</th>
                                    <td dmx-text="data_detail1.data.veh_ano"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='vehiculo'">
                                    <th>Veh modelo</th>
                                    <td dmx-text="data_detail1.data.veh_modelo"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='vehiculo'">
                                    <th>Veh fabricante</th>
                                    <td dmx-text="data_detail1.data.veh_fabricante"></td>
                                </tr>
                                <tr>
                                    <th>Modalidad de embarque</th>
                                    <td dmx-text="data_detail1.data.modalidad_de_embarque.capitalize()"></td>
                                </tr>

                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='contenedor'">
                                    <th>Tipo de contenedor</th>
                                    <td dmx-text="data_detail1.data.tipo_de_contenedor"></td>
                                </tr>
                                <tr dmx-show="data_detail1.data.modalidad_de_embarque=='contenedor'">
                                    <th>Cantidad de contenedores</th>
                                    <td dmx-text="data_detail1.data.cantidad_de_contenedores"></td>
                                </tr>
                                <tr>
                                    <th>Informacion adicional</th>
                                    <td dmx-text="data_detail1.data.informacion_adicional.capitalize()"></td>
                                </tr>


                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<div is="dmx-browser" id="browser1"></div>
<dmx-datetime id="var1" interval="minutes"></dmx-datetime>
<dmx-serverconnect id="serverconnectquerypagedcotizaciones" url="api/cotizaciones/query_paged_cotizaciones" dmx-param:offset="query1.data.offset" dmx-param:limit="20" dmx-param:sort="query1.data.sort" dmx-param:dir="query1.data.dir" dmx-param:filter="query1.data.filter"></dmx-serverconnect>
<dmx-serverconnect id="serverconnectcontizacion" url="/api/querytablecotizacion" sockets="true"></dmx-serverconnect>
<dmx-query-manager id="query1"></dmx-query-manager>
<meta name="ac:route" content="/app-cotizaciones/:filter?">

<!-- Page Content-->
<div class="page-content">
    <div class="container-fluid">
        <!-- Page-Title -->
        <div class="row">
            <div class="col-sm-12">
                <div class="page-title-box">
                    <div class="row">
                        <div class="col">
                            <h4 class="page-title">Cotizaciones&nbsp;</h4>
                            <ol class="breadcrumb visually-hidden">
                                <li class="breadcrumb-item"><a href="javascript:void(0);">Dastone</a></li>
                                <li class="breadcrumb-item"><a href="javascript:void(0);">Projects</a></li>
                                <li class="breadcrumb-item active">Projects</li>
                            </ol>
                        </div>
                        <!--end col-->
                        <div class="col-auto align-self-center">
                            <a href="#" class="btn btn-sm btn-outline-primary" id="Dash_Date">
                                <span class="day-name" id="Day_Name">Today:</span>&nbsp;
                                <span class="" id="Select_date">Jan 11</span>
                                <i data-feather="calendar" class="align-self-center icon-xs ms-1"></i>
                            </a>
                            <a href="#" class="btn btn-sm btn-outline-primary">
                                <i data-feather="download" class="align-self-center icon-xs"></i>
                            </a>
                        </div>
                        <!--end col-->
                    </div>
                    <!--end row-->
                </div>
                <!--end page-title-box-->
            </div>
            <!--end col-->
        </div>
        <!--end row-->
        <!-- end page title end breadcrumb -->
        <div class="row">
            <div class="col-lg-6">
                <ul class="list-inline">
                    <li class="list-inline-item">
                        <h5 class="mt-0">Lista de cotizaciones recibidas</h5>
                    </li>
                </ul>
            </div>
            <!--end col-->

            <div class="col-lg-6 text-end">
                <div class="text-end">
                    <ul class="list-inline ul-flex">
                        <li class="list-inline-item">
                            <div class="input-group">
                                <input type="text" id="example-input1-group2" name="example-input1-group2" class="form-control form-control-sm" placeholder="Search">
                                <button type="button" class="btn btn-soft-primary btn-sm"><i class="fas fa-search"></i></button>
                            </div>
                        </li>
                        <li class="list-inline-item">
                            <button type="button" class="btn btn-soft-primary btn-sm"><i class="fas fa-filter"></i></button>
                        </li>
                        <li class="list-inline-item">
                            <button type="button" class="btn btn-soft-primary btn-sm text-nowrap">Nueva Cotización</button>
                        </li>
                    </ul>
                </div>
            </div>
            <!--end col-->
        </div>
        <!--end row-->

        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-body ">
                        <div class="table-responsive">
                            <table class="table text-center">
                                <thead>
                                    <tr>
                                        <th class="sorting" dmx-on:click="query1.set('sort','fecha_solicitud');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='fecha_solicitud' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='fecha_solicitud' && query1.data.dir == 'desc'">Fecha solicitud</th>
                                        <th class="sorting" dmx-on:click="query1.set('sort','status');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='status' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='status' && query1.data.dir == 'desc'">Status</th>
                                        <th class="sorting" dmx-on:click="query1.set('sort','company_id');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='company_id' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='company_id' && query1.data.dir == 'desc'">Company</th>
                                        <th class="sorting" dmx-on:click="query1.set('sort','tipo_de_servicio');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='tipo_de_servicio' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='tipo_de_servicio' && query1.data.dir == 'desc'">Tipo de servicio</th>
                                        <th class="sorting" dmx-on:click="query1.set('sort','tipo_de_operacion');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='tipo_de_operacion' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='tipo_de_operacion' && query1.data.dir == 'desc'">Tipo de operacion</th>
                                        <th class="sorting" dmx-on:click="query1.set('sort','modalidad_de_transporte');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='modalidad_de_transporte' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='modalidad_de_transporte' && query1.data.dir == 'desc'">Modalidad de transporte</th>
                                        <th class="sorting" dmx-on:click="query1.set('sort','modalidad_de_embarque');query1.set('dir',query1.data.dir == 'desc' ? 'asc' : 'desc')" dmx-class:sorting_asc="query1.data.sort=='modalidad_de_embarque' && query1.data.dir == 'asc'" dmx-class:sorting_desc="query1.data.sort=='modalidad_de_embarque' && query1.data.dir == 'desc'"></th>
                                    </tr>
                                </thead>
                                <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="serverconnectquerypagedcotizaciones.data.query.data" id="tableRepeat1" dmx-state="query1" dmx-sort="sort" dmx-order="dir">
                                    <tr>
                                        <td dmx-text="fecha_solicitud.formatDate('dd-MM-yyyy')"></td>
                                        <td>
                                            <select id="select1" class="form-select bg-soft-primary" dmx-bind:value="status" dmx-class:bg-soft-warning="fecha_solicitud.minutesUntil(var1.datetime)&lt;-2880&amp;&amp;status!='Recibida'" dmx-class:bg-soft-danger="fecha_solicitud.minutesUntil(var1.datetime)&lt;-5000&amp;&amp;status!='Recibida'" dmx-class:bg-soft-success="status=='enviada'" dmx-on:changed="serverconnectupdatestatus.load({status: value, id: id})">
                                                <option value="recibida">Recibida</option>
                                                <option value="pendiente">Pendiente</option>
                                                <option value="enviada">Enviada</option>
                                                <option value="completadas">Completadas</option>
                                            </select>
                                        </td>
                                        <td dmx-text="name.capitalize()">Acme</td>
                                        <td dmx-text="tipo_de_servicio.capitalize()"></td>
                                        <td dmx-text="tipo_de_operacion.capitalize()"></td>
                                        <td dmx-text="modalidad_de_transporte.capitalize()"></td>
                                        <td>
                                            <button id="btn1" class="btn round btn-primary" data-bs-toggle="offcanvas" data-bs-target="#offcanvas1" dmx-on:click="offcanvas1.data_detail1.select(id)">+</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- <div class="media mb-3">
                            <img src="/dastone/default/assets/images/widgets/project2.jpg" alt="" class="thumb-md rounded-circle">
                            <div class="media-body align-self-center text-truncate ms-3">
                                <h4 class="m-0 fw-semibold text-dark font-15" dmx-text="compania">Banking</h4>
                                <p class="text-muted  mb-0 font-13" dmx-text="persona_contacto">
                                    <font color="#212529">{{persona_contacto}}</font>
                                </p>
                                <p class="text-muted  mb-0 font-13" dmx-text="persona_contacto">
                                    <font color="#212529">{{email_contacto}}</font>
                                </p>
                            </div>
                        </div> 
                        <hr class="hr-dashed">-->



                        <!--end task-box-->
                    </div>
                    <!--end card-body-->
                </div>
                <!--end card-->
            </div>
            <!--end col-->

            <!--end col-->
            <!--end col-->
        </div>
        <!--end row-->

        <!--end row-->

    </div><!-- container -->

    <footer class="footer text-center text-sm-start">
        &copy;

        <script>
            document.write(new Date().getFullYear())
        </script> Dastone <span class="text-muted d-none d-sm-inline-block float-end">Crafted with <i class="mdi mdi-heart text-danger"></i> by Creativehub</span>
    </footer>
    <!--end footer-->
</div>
<!-- end page content -->